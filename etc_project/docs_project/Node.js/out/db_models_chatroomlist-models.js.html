<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>db/models/chatroomlist-models.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-model_chatRoomList.html">model/chatRoomList</a></li><li><a href="module-routes_chatRoomList.html">routes/chatRoomList</a><ul class='methods'><li data-type='method'><a href="module-routes_chatRoomList.html#~get://chatroomlist">get://chatroomlist</a></li></ul></li><li><a href="module-schema_chatRoomList.html">schema/chatRoomList</a><ul class='methods'><li data-type='method'><a href="module-schema_chatRoomList.html#~methods:comparePassword">methods:comparePassword</a></li><li data-type='method'><a href="module-schema_chatRoomList.html#~pre:save">pre:save</a></li><li data-type='method'><a href="module-schema_chatRoomList.html#~query:sortByName">query:sortByName</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">db/models/chatroomlist-models.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const mongoose = require('mongoose');

/**
 * 채팅방 목록 Schema
 * @module schema/chatRoomList
 */
const ChatRoomList = new mongoose.Schema({/** @lends module:schema/chatRoomList */
    /**
     * 채팅방 UUID
     */
    chatUUID:{
        type:String,
        required:true,
        unique:true,
    },
    /**
     * 채팅방 참여 유저 ID
     * &lt;br>유저가 3명이면 a,b,c로 콤마로 구분 데이터를 받아와서 ,기준으로 파싱
     */
    userId:{
        type:String,
        required:true,
    },
    /**
     * 채팅방 제목
     */
    chatTitle:{
        type:String,
        required:false,
    },
    /**
     * 생성시간
     */
    chatTime:{
        type: Date, 
        default: Date.now
    },
});

/** @lends module:schema/chatRoomList */
/**
 * 사용자 비밀번호 체크 함수
 * @method methods:comparePassword
 * @param {Number} pw 암호화 된 사용자 패스워드
 * @param {Callback} cb 결과값 전달 callback
 * @returns {} ....
 */
ChatRoomList.methods.comparePassword = function(pw ,callback)  {
    if (this.password === pw) {
        callback(null, true);
    } else {
        callback('password 불일치');
    }
}

/**
* 함수 설명...
* @method query:sortByName
* @param {String} order 
* @returns {Object} 리턴 설명...
*/
ChatRoomList.query.sortByName = function(order) {
    return this.sort({ nickname: order })
}

/**
* 함수 설명...
* @method pre:save
* @param {String} next 설명...
*/
ChatRoomList.pre('save', function(next) {
    if (!this.email) {
        throw '이메일이 없습니다'
    }
    if (!this.createdAt) {
        this.createdAt = new Date()
    }
    next()
})

/**
 * 채팅방 목록 Model
 * @module model/chatRoomList
 * @see module:schema/chatRoomList
 */
module.exports = mongoose.model('ChatRoomList',ChatRoomList);
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.2</a> on Wed Jun 05 2019 09:19:50 GMT+0700 (GMT+07:00) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
